<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Age and Time Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 50px;
            text-align: center;
        }
        input, button {
            padding: 10px;
            margin: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        .output {
            margin-top: 20px;
        }
        /* Style for form layout */
        .form-group {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px auto;
            max-width: 400px;
        }
        .form-group label {
            width: 100px;
            text-align: left;
            margin-right: 10px;
        }
        .form-group input {
            flex-grow: 1;
        }
        .holiday-group {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px auto;
            max-width: 400px;
            flex-direction: column;
        }
    </style>
</head>
<body>

    <h2>Age and Time Calculator</h2>

    <!-- Age Calculator Section -->
    <h3>Age Calculator</h3>
    <p>Enter your Date of Birth:</p>
    <input type="date" id="dob">
    <button onclick="calculateAge()">Calculate Age</button>
    <h4 id="ageResult" class="output"></h4>

    <!-- Time Calculator Section -->
    <h3>Time Difference Calculator</h3>

    <div class="form-group">
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate">
    </div>
    <div class="form-group">
        <label for="startTime">Start Time:</label>
        <input type="time" id="startTime">
    </div>
    <div class="form-group">
        <label for="endDate">End Date:</label>
        <input type="date" id="endDate">
    </div>
    <div class="form-group">
        <label for="endTime">End Time:</label>
        <input type="time" id="endTime">
    </div>

    <!-- Holiday Inputs -->
    <h3>Select Holidays</h3>
    <div class="holiday-group">
        <label><input type="checkbox" id="fridayHoliday"> Friday</label>
        <label><input type="checkbox" id="saturdayHoliday"> Saturday</label>
        <label><input type="checkbox" id="sundayHoliday"> Sunday</label>
    </div>
    <div class="form-group">
        <label for="optionalHolidays">Optional Holidays:</label>
        <input type="number" id="optionalHolidays" value="0" min="0">
    </div>

    <br>
    <button onclick="calculateTime('seconds')">Show in Seconds</button>
    <button onclick="calculateTime('minutes')">Show in Minutes</button>
    <button onclick="calculateTime('hours')">Show in Hours</button>
    <button onclick="calculateTime('days')">Show in Days</button>
    <button onclick="calculateTime('months')">Show in Months</button>
    <button onclick="calculateTime('years')">Show in Years</button>
    <button onclick="calculateTime('full')">Show Full Breakdown</button>
    <h4 id="timeResult" class="output"></h4>

    <script>
        // Age Calculator Function
        function calculateAge() {
            const dob = document.getElementById("dob").value;
            if (dob === "") {
                document.getElementById("ageResult").innerHTML = "Please select a valid date of birth.";
                return;
            }

            const dobDate = new Date(dob);
            const today = new Date();

            let age = today.getFullYear() - dobDate.getFullYear();
            const monthDiff = today.getMonth() - dobDate.getMonth();
            const dayDiff = today.getDate() - dobDate.getDate();

            if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
                age--;
            }

            document.getElementById("ageResult").innerHTML = `Your age is: ${age} years old.`;
        }

        // Time Difference Calculator Function with Holiday Exclusions
        function calculateTime(format) {
            const startDate = document.getElementById("startDate").value;
            const startTime = document.getElementById("startTime").value;
            const endDate = document.getElementById("endDate").value;
            const endTime = document.getElementById("endTime").value;
            const fridayHoliday = document.getElementById("fridayHoliday").checked;
            const saturdayHoliday = document.getElementById("saturdayHoliday").checked;
            const sundayHoliday = document.getElementById("sundayHoliday").checked;
            const optionalHolidays = parseInt(document.getElementById("optionalHolidays").value);

            if (startDate === "" || endDate === "") {
                document.getElementById("timeResult").innerHTML = "Please select valid start and end dates.";
                return;
            }

            let start = new Date(startDate);
            let end = new Date(endDate);

            // If time is provided, append the time to the date
            if (startTime) {
                const [startHours, startMinutes] = startTime.split(':');
                start.setHours(startHours);
                start.setMinutes(startMinutes);
            }
            if (endTime) {
                const [endHours, endMinutes] = endTime.split(':');
                end.setHours(endHours);
                end.setMinutes(endMinutes);
            }

            if (start > end) {
                document.getElementById("timeResult").innerHTML = "End time must be after start time.";
                return;
            }

            let timeDiff = (end - start) / 1000;  // Difference in seconds
            let totalDays = Math.floor(timeDiff / 86400); // Total days

            let holidayCount = 0;
            let fridayCount = 0, saturdayCount = 0, sundayCount = 0;

            // Iterate over each day between start and end
            for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
                let day = d.getDay();
                if (fridayHoliday && day === 5) fridayCount++;
                if (saturdayHoliday && day === 6) saturdayCount++;
                if (sundayHoliday && day === 0) sundayCount++;
            }

            holidayCount = fridayCount + saturdayCount + sundayCount + optionalHolidays;

            // Exclude holidays from the total days
            totalDays -= holidayCount;

            const seconds = Math.floor(timeDiff);
            const minutes = Math.floor(timeDiff / 60);
            const hours = Math.floor(timeDiff / 3600);
            const days = totalDays; // Adjusted total days without holidays
            const months = Math.floor(days / 30.4375); // Average month duration
            const years = Math.floor(days / 365.25);   // Average year duration

            if (format === "seconds") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${seconds} seconds.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "minutes") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${minutes} minutes.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "hours") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${hours} hours.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "days") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${days} days.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "months") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${months} months.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "years") {
                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${years} years.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            } else if (format === "full") {
                const fullYears = Math.floor(days / 365.25);
                const remainingDaysAfterYears = days % 365.25;

                const fullMonths = Math.floor(remainingDaysAfterYears / 30.4375);
                const remainingDaysAfterMonths = remainingDaysAfterYears % 30.4375;

                const fullDays = Math.floor(remainingDaysAfterMonths);
                const fullHours = Math.floor((timeDiff % 86400) / 3600);
                const fullMinutes = Math.floor((timeDiff % 3600) / 60);
                const fullSeconds = Math.floor(timeDiff % 60);

                document.getElementById("timeResult").innerHTML = `Total Time (excluding holidays): ${fullYears} years, ${fullMonths} months, ${fullDays} days, ${fullHours} hours, ${fullMinutes} minutes, and ${fullSeconds} seconds.<br>Fridays: ${fridayCount}, Saturdays: ${saturdayCount}, Sundays: ${sundayCount}, Optional Holidays: ${optionalHolidays}`;
            }
        }
    </script>

</body>
</html>
